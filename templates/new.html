{% extends 'layout.html' %}
{% block content %}
    <div class="container">
      <h1 class="text-center mt-3 border-bottom border-success">New</h1>
      <div class="row border border-5 my-3 rounded-3">

        <div class="col">
          <form action="/create" method="post" enctype="multipart/form-data"　onSubmit="return check()">

            <div class="form-group my-3">
              <label for="title" class="my-2">Place</label><br>
              <input type="text" name="title" value="">
            </div>
            <p></p>
            <div class="form-group">
              <label for="adress" class="my-2">Adress</label><br>
              <input type="text" name="adress" value="">
            </div>
            <p></p>
            <div class="form-group">
              <label for="date" class="my-2">Date</label><br>
              <input type="date" name="date">
            </div>
            <p></p>
            <div class="form-group">
              <label for="score" class="my-2">Score</label><br>
              <input type="range" min="1" max="5" step="0.5" value="" name="score" class="input-range" /> 
            </div>
            <p></p>
            <div class="form-group">
              <label for="image">Picture</label>
              <input type="file" name="image" onchange="previewFile(this);">
            </div>
            <p></p>
            <div class="form-group">
              <label for="content">Review</label><br>
              <textarea name="content" cols="40" rows="10"></textarea>
            </div>
            <p></p>
            <div class="my-3">
              <button type="submit" class="btn btn-primary mx-3">RECORD</button>
              <a href='/post' class=""><svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="#b81414" class="bi bi-x-circle" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
              </svg></a>
            </div>
          </form>
        </div>
        <div class="col">
          <p class="my-3">Preview</p>
          <img id="preview" class="img-fluid">
        </div>
      </div>
    </div>

      <script>
        function previewFile(hoge){
          var fileData = new FileReader();
          fileData.onload = (function() {
            //id属性が付与されているimgタグのsrc属性に、fileReaderで取得した値の結果を入力することで
            //プレビュー表示している
            document.getElementById('preview').src = fileData.result;
          });
          fileData.readAsDataURL(hoge.files[0]);
        }
        
        function check(){
          
          if(window.confirm('保存してよろしいですか？')){ // 確認ダイアログを表示
            window.alert('保存しました')
            return true; // 「OK」時は送信を実行
            
          }
          else{ // 「キャンセル」時の処理
        
            window.alert('キャンセルされました'); // 警告ダイアログを表示
            return false; // 送信を中止
        
          }
        
        }
      </script>
{% endblock %}